
/** 

ðŸ‡«â€ŒðŸ‡±â€ŒðŸ‡¦â€ŒðŸ‡¸â€ŒðŸ‡­â€Œ-ðŸ‡²â€ŒðŸ‡©â€Œ 

  ð—–ð—¼ð—½ð˜†ð—¿ð—¶ð—´ð—µð˜ (ð—–) 2024.
 ð—Ÿð—¶ð—°ð—²ð—»ð˜€ð—²ð—± ð˜‚ð—»ð—±ð—²ð—¿ ð˜ð—µð—²  ð— ð—œð—§ ð—Ÿð—¶ð—°ð—²ð—»ð˜€ð—²;
 ð—¬ð—¼ð˜‚ ð—ºð—®ð˜† ð—»ð—¼ð˜ ð˜‚ð˜€ð—² ð˜ð—µð—¶ð˜€ ð—³ð—¶ð—¹ð—² ð—²ð˜…ð—°ð—²ð—½ð˜ ð—¶ð—» ð—°ð—¼ð—ºð—½ð—¹ð—¶ð—®ð—»ð—°ð—² ð˜„ð—¶ð˜ð—µ ð˜ð—µð—² ð—Ÿð—¶ð—°ð—²ð—»ð˜€ð—².
 ð—œð˜ ð—¶ð˜€ ð˜€ð˜‚ð—½ð—½ð—¹ð—¶ð—²ð—± ð—¶ð—» ð˜ð—µð—² ð—µð—¼ð—½ð—² ð˜ð—µð—®ð˜ ð—¶ð˜ ð—ºð—®ð˜† ð—¯ð—² ð˜‚ð˜€ð—²ð—³ð˜‚ð—¹.
 * @ð—½ð—¿ð—¼ð—·ð—²ð—°ð˜_ð—»ð—®ð—ºð—² : ð—™ð—¹ð—®ð˜€ð—µ ð— ð——, ð—® ð˜€ð—¶ð—ºð—½ð—¹ð—² ð—®ð—»ð—± ð—²ð—®ð˜€ð˜† ð—ªð—µð—®ð˜ð˜€ð—”ð—½ð—½ ð˜‚ð˜€ð—²ð—¿ ð—¯ð—¼ð˜ 
 * @ð—¼ð˜„ð—»ð—²ð—¿: ð—™ð—¿ð—®ð—»ð—°ð—² ð—žð—¶ð—»ð—´ 
 
 **/












const { france } = require('../framework/france');
const s = require('../set')


france(
    {
        nomCom : "setvar",
        categorie : "heroku"
    }, async (dest , zk , commandeOptions) =>{

       const {ms,repondre,superUser , arg} = commandeOptions ;
       
       if(!superUser){repondre('only Mods can use this commande');return};
       if(!arg[0] || !(arg.join('').split('='))) {repondre('Bad format ; Exemple of using :\nSetvar OWNER_NAME=France King');return};
     
    const text = arg.join(" ")
     const Heroku = require("heroku-client");
   
     const heroku = new Heroku({
        token: s.HEROKU_APY_KEY,
      });

     let baseURI = "/apps/" + s.HEROKU_APP_NAME;
        await heroku.patch(baseURI + "/config-vars", {
          body: {
                  [text.split('=')[0]]: text.split('=')[1],
          },
        });
        await repondre('That Heroku var is changing,The bot is rebooting....')
    }
);

france(
    {
        nomCom : "allvar",
        categorie : "heroku"
    }, async (dest , zk , commandeOptions) =>{

       const {ms,repondre,superUser , arg} = commandeOptions ;
       
       if(!superUser){repondre('only mods can use this commande');return}; 
      
            const Heroku = require("heroku-client");

			const heroku = new Heroku({
				token: s.HEROKU_APY_KEY,
			});
			let baseURI = "/apps/" + s.HEROKU_APP_NAME;

            let h = await heroku.get(baseURI+'/config-vars')
let str = '*All my HEROKU Vars*\n\n'
for (vr in h) {
str+= 'âš¡ *'+vr+'* '+'= '+h[vr]+'\n'
}
 repondre(str)


}

);       


    france(
        {
            nomCom : "getvar",
            categorie : "heroku"
        }, async (dest , zk , commandeOptions) =>{
    
           const {ms,repondre,superUser , arg} = commandeOptions ;
           
           if(!superUser){repondre('Only Mods can use this command');return}; 
           if(!arg[0]) {repondre('insert the variable name in capital letter'); return} ;
      
           try {
            const Heroku = require("heroku-client");
               
            const heroku = new Heroku({
              token: s.HEROKU_API_KEY,
            });
            let baseURI = "/apps/" + s.HEROKU_APP_NAME;
        let h = await heroku.get(baseURI+'/config-vars')
        for (vr in h) {
        if( arg.join(' ') ===vr ) return  repondre( vr+'= '+h[vr]) 	;
        } 
        
        } catch(e) {repondre('Error' + e)}
   
        });

